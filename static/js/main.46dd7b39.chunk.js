(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(54)},29:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(2),o=a.n(l),c=(a(29),a(3)),i=a(4),u=a(6),s=a(5),d=a(7);a(30);function m(e){return!e.valid}var v=function(e){var t=["input"],a=e.type||"text",n=e.maximumLength||"",l=a;return m(e)&&t.push("invalid"),r.a.createElement("div",{className:t.join(" ")},r.a.createElement("input",{type:a,id:l,value:e.value,maxLength:n,onChange:e.onChange}),r.a.createElement("label",{htmlFor:l},e.label),m(e)?r.a.createElement("span",null,e.errorMessage):null)},h=a(9),f=a(8),p=a.n(f),C=a(20),b=(a(32),function(e){return r.a.createElement("button",{onClick:e.onClick,className:"primary",disabled:e.disabled},e.children)}),y=a(21),g=(a(33),function(e){return r.a.createElement(y.a,{open:!0},function(t){return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"content"},e.label),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{className:"button",onClick:function(){t()}},"Continue")))})}),E=a(22),k=a.n(E),j=a(23),O=a.n(j).a.create({baseURL:"http://localhost:4000/"}),x=(a(51),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={isAnyCard:!1,isAnyCards:[],isFormValid:!1,formControls:{card:{value:"",type:"",label:"",errorMessage:"Insert correct card number",maximumLength:19,valid:!1,validation:{number:!0,length:19}},cardCode:{value:"",type:"",label:"",errorMessage:"Insert correct code",maximumLength:3,valid:!1,validation:{number:!0,length:3}}},isCardCorrect:!1,isCardFound:!1},a.applyHandler=Object(C.a)(p.a.mark(function e(){var t,n,r,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isFormValid:!1}),t={number:a.state.formControls.card.value,cardCode:a.state.formControls.cardCode.value},e.prev=2,e.next=5,O.get("/cards?number=".concat(t.number));case 5:1===(n=e.sent).data.length&&(r=n.data[0]).code===t.cardCode?(l={number:r.number,discount:r.discount},a.toFoundPopup(),a.toSaveCardData(l),a._toClearState()):(a.toNotCorrectPopup(),a._toClearState()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])})),a.submitHandler=function(e){e.preventDefault()},a.onChangeHandler=function(e,t){var n=Object(h.a)({},a.state.formControls),r=Object(h.a)({},n[t]);r.value=e.target.value,r.touched=!0,r.valid=a.validateControl(r.value,r.validation),n[t]=r;var l=!0;Object.keys(n).forEach(function(e){l=n[e].valid&&l}),a.setState({formControls:n,isFormValid:l})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"toSaveCardData",value:function(e){var t;this.state.isAnyCards.forEach(function(a){t=e.number===a.number}),t||this.setState(function(t){return{isAnyCards:t.isAnyCards.concat(e),isAnyCard:!0}})}},{key:"toFoundPopup",value:function(){this.setState(function(e){return{isCardFound:!e.isCardFound}})}},{key:"toNotCorrectPopup",value:function(){this.setState(function(e){return{isCardCorrect:!e.isCardCorrect}})}},{key:"_toClearState",value:function(){this.setState({isFormValid:!1,formControls:{card:{value:"",type:"",label:"",errorMessage:"Insert correct card number",maximumLength:19,valid:!1,validation:{number:!0,length:19}},cardCode:{value:"",type:"",label:"",errorMessage:"Insert correct code",maximumLength:3,valid:!1,validation:{number:!0,length:3}}}})}},{key:"validateControl",value:function(e,t){if(!t)return!0;var a=!0;if(t.number){var n=+e;a=k.a.number(n)&&a}return t.length&&(a=e.length>=t.length&&a),a}},{key:"renderInputs",value:function(){var e=this;return Object.keys(this.state.formControls).map(function(t,a){var n=e.state.formControls[t];return r.a.createElement(v,{key:t+a,type:n.type,label:n.label,value:n.value,errorMessage:n.errorMessage,maximumLength:n.maximumLength,valid:n.valid,onChange:function(a){return e.onChangeHandler(a,t)}})})}},{key:"renderPopup",value:function(e){return r.a.createElement(g,{label:e})}},{key:"renderDivCard",value:function(){return this.state.isAnyCards.map(function(e,t){var a="**** **** **** **** ".concat(e.number.slice(16)),n="".concat(String(e.discount),",00");return r.a.createElement("div",{key:t,className:"cardDiv"},r.a.createElement("div",null,r.a.createElement("p",null,"Gift card"),r.a.createElement("p",null,a)),r.a.createElement("p",null,"-\u20ac",n))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"cardForm"},r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("p",null,"Please enter the 19-digit number and code from your gift card below"),this.state.isAnyCard?this.renderDivCard(this.state.isAnyCards):null,r.a.createElement("div",{className:"input__block"},this.renderInputs()),this.state.isCardCorrect?this.renderPopup("Your card is not accepted. Please try another card number or card code"):null,this.state.isCardFound?this.renderPopup("Your card is accepted successfully!"):null,r.a.createElement(b,{onClick:this.applyHandler,disabled:!this.state.isFormValid},"Apply")))}}]),t}(n.Component)),S=(a(52),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={haveCard:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"isHaveCardHandler",value:function(){this.setState(function(e){return{haveCard:!e.haveCard}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"Gift Cards"),r.a.createElement(v,{type:"checkbox",label:"Do you have a gift card?",valid:"true",onChange:function(){return e.isHaveCardHandler()}}),this.state.haveCard?r.a.createElement(x,null):null)}}]),t}(n.Component));a(53);var F=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(S,null))};o.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.46dd7b39.chunk.js.map